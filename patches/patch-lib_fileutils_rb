$OpenBSD: patch-lib_fileutils_rb,v 1.1.1.1 2013/03/19 23:38:23 jeremy Exp $

Make FileUtils.mkdir_p act more like mkdir(1) -p, by not attempting
to create directories that already exist.  This fixes systrace
warnings when building ports.

--- lib/fileutils.rb.orig	Tue Nov 13 20:26:20 2012
+++ lib/fileutils.rb	Mon Dec  3 10:03:49 2012
@@ -282,7 +282,7 @@ public
     list.map {|path| path.chomp(?/) }.each do |path|
       # optimize for the most common case
       begin
-        fu_mkdir path, options[:mode]
+        fu_mkdir path, options[:mode] unless File.directory?(path)
         next
       rescue SystemCallError
         next if File.directory?(path)
@@ -295,7 +295,7 @@ public
       end
       stack.reverse_each do |dir|
         begin
-          fu_mkdir dir, options[:mode]
+          fu_mkdir dir, options[:mode] unless File.directory?(dir)
         rescue SystemCallError
           raise unless File.directory?(dir)
         end
